<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <meta name="Title" content="Man page for the nagios plugin check_avaya_load" />
  <meta name="Description" content="nagios plugin manual page for the nagios plugin check_avaya_load" />
  <meta name="Keywords" content="nagios, monitoring, Avaya, PBX, VOIP" />
  <meta name="Classification" content="Nagios plugin manual" />
  <title>Man page for the nagios plugin check_avaya_load</title>
</head>

<body>
<div id="wrapper">
  <div id="banner">
    <h1>check_avaya_load</h1>
    <h2>Man page for the Nagios plugin check_avaya_load</h2>
  </div>
  <div id="content">
  <div id=copyright>Copyright (c) 2010 Frank4DD <support[at]frank4dd.com></div>
  <h3 id=intro>check_avaya_load</h3>
  <hr />
<p>
This plugin checks the CPU load of AVAYA S8xxx media servers, accessing Avaya's SNMP agent with <a href="avaya/g3mib.asn1">G3-AVAYA-MIB Version 5.1.1</a>.
It returns the total CPU usage and idle values in percent, checked against warning and critical threshold values. When called with the -f option, it returns additional CPU usage details in the performance data section.
</p>
<p>
It requires SNMP access to the Avaya media server, which is configured in the management console.
The plugin depends on Perl's Net::SNMP package, i.e. perl-SNMP-5.3.0.1-25.34.1.
</p>
<h3 id=usage>Usage:</h3>
<hr />
<p>
check_avaya_load.pl [-v] -H &lt;host&gt; -C &lt;snmp_community&gt; [-2] | (-l login -x passwd [-X pass -L &lt;authp&gt;,&lt;privp&gt;])  [-p &lt;port&gt;] -w &lt;warn level&gt; -c &lt;crit level&gt; [-f] [-t &lt;timeout&gt;] [-V]
</p>
<h3 id=options>Options:</h3>
<hr />
<p>
-v, --verbose<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print extra debugging information 
</p>
<p>
-h, --help<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print this help message
</p>
<p>
-H, --hostname=HOST<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name or IP address of host to check
</p>
<p>
-C, --community=COMMUNITY NAME<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; community name for the host's SNMP agent (implies v1 protocol)
</p>
<p>
-2, --v2c<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Use snmp v2c
</p>
<p>
-l, --login=LOGIN ; -x, --passwd=PASSWD<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Login and auth password for snmpv3 authentication<br> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; If no priv password exists, implies AuthNoPriv 
</p>
<p>
-X, --privpass=PASSWD<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Priv password for snmpv3 (AuthPriv protocol)
</p>
<p>
-L, --protocols=&lt;authproto&gt;,&lt;privproto&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;authproto&gt; : Authentication protocol (md5|sha : default md5)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;privproto&gt; : Priv protocole (des|aes : default des) 
</p>
<p>
-p, --port=PORT<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SNMP port (Default 161)
</p>
<p>
-w, --warn=INTEGER<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; warning level for cpu in percent
</p>
<p>
-c, --crit=INTEGER<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; critical level for cpu in percent
</p>
<p>
-f, --perfparse<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Perfparse compatible output
</p>
<p>
-t, --timeout=INTEGER<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timeout for SNMP in seconds (Default: 5)
</p>
<p>
-V, --version<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; prints version number
</p>
<h3 id=plugindefinition>Plugin Definition Example:</h3>
<hr />
<p>
Below is an example of the plugin definition in the Nagios command.cfg file.
</p>
<pre><code># check_avaya_load nagios plugin
define command{
  command_name check_avaya_load
  command_line /srv/app/nagios/libexec/check_avaya_load.pl -H $HOSTADDRESS$ 
-t 60 -C $ARG1$ -f -w $ARG2$ -c $ARG3$
}</code></pre>
<p></p>
<h3 id=pluginexample>Plugin Usage Example:</h3>
<hr />
<p>
The plugin with its most basic use.
</p>
<pre class=code>susie: ~ # cd /srv/app/nagios/libexec
susie: ~ # ./check_avaya_load.pl -H 192.168.65.11 -C SECro -w 75 -c 95
Avaya CPU: 9% used, 91% free : OK</pre>
</p>
<p>
The plugin with the -f option, returning additional performance data.
</p>
<pre class=code>susie: ~ # cd /srv/app/nagios/libexec
susie: ~ # ./check_avaya_load.pl -H 192.168.65.11 -C SECro -w 75 -c 95 -f
Avaya CPU: 6% used, 94% free : OK | load_os=0; load_call=1; load_mgt=5; load_idle=94;</pre>
  </p>
</div>
</body></html>
