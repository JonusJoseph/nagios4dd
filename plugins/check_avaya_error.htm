<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <meta name="Title" content="Man page for the nagios plugin check_avaya_error" />
  <meta name="Description" content="nagios plugin manual page for the nagios plugin check_avaya_error" />
  <meta name="Keywords" content="nagios, monitoring, Avaya, PBX, VOIP" />
  <meta name="Classification" content="Nagios plugin manual" />
  <title>Man page for the nagios plugin check_avaya_error</title>
</head>

<body>
<div id="wrapper">
  <div id="banner">
    <h1>check_avaya_error</h1>
    <h2>Man page for the Nagios plugin check_avaya_error</h2>
  </div>
  <div id="content">
  <div id=copyright>Updated (c) 2010 Frank4DD <support[at]frank4dd.com></div>
  <h3 id=intro>check_avaya_error</h3>
  <hr>
<p>
This plugin checks the error logs of AVAYA S8xxx media servers through Avaya's SNMP agent with <a href="avaya/g3mib.asn1">G3-AVAYA-MIB Version 5.1.1</a>.
It returns the port, date, time and alert names that have been recorded for server and communication manager logs.
</p>
<p>
It requires SNMP access to the Avaya media server, which is configured in the management console.
The plugin depends on Perl's Net::SNMP package, i.e. perl-SNMP-5.3.0.1-25.34.1.
</p>
<h3 id=usage>Usage:</h3>
  <hr \>
<p>
Usage: /srv/app/nagios/libexec/check_avaya_error.pl [-v] -H &lt;host&gt; -C &lt;snmp_community&gt; [-2] | (-l login -x passwd [-X pass -L &lt;authp&gt;,&lt;privp&gt;])  [-p &lt;port&gt;] -S &lt;SVL|CML&gt; -E &lt;errorlevel&gt; [-t &lt;timeout&gt;] [-V]
</p>
<h3 id=options>Options:</h3>
  <hr \>
<p>
-v, --verbose<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print extra debugging information 
</p>
<p>
-h, --help<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print this help message
</p>
<p>
-H, --hostname=HOST<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name or IP address of host to check
</p>
<p>
-C, --community=COMMUNITY NAME<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; community name for the host's SNMP agent (implies v1 protocol)
</p>
<p>
-2, --v2c<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Use snmp v2c
</p>
<p>
-l, --login=LOGIN ; -x, --passwd=PASSWD<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Login and auth password for snmpv3 authentication<br /> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; If no priv password exists, implies AuthNoPriv 
</p>
<p>
-X, --privpass=PASSWD<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Priv password for snmpv3 (AuthPriv protocol)
</p>
<p>
-L, --protocols=&lt;authproto&gt;,&lt;privproto&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;authproto&gt; : Authentication protocol (md5|sha : default md5)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;privproto&gt; : Priv protocole (des|aes : default des) 
</p>
<p>
-p, --port=PORT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SNMP port (Default 161)
</p>
<p>
-S, --service=SERVICE<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Please specify SVL (server logs) or CML (communication manager logs)
</p>
<p>
-E, --errorlevel=LEVEL<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Please specify one of the following: MAJ, MIN, WRN or CRI

</p>
<p>
-t, --timeout=INTEGER<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timeout for SNMP in seconds (Default: 5)
</p>
<p>
-V, --version<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; prints version number
</p>
<h3 id=plugindefinition>Plugin Definition Example:</h3>
<p>
Below is an example of the plugin definition in the Nagios command.cfg file.
</p>
<pre><code># check_avaya_error.pl nagios plugin
define command{
  command_name check_avaya_alerts
  command_line /srv/app/nagios/libexec/check_avaya_error.pl -H $HOSTADDRESS$
-t 60 -C $ARG1$ -S $ARG2$ -E $ARG3$
}</code></pre>
<p></p>
<h3 id=pluginexample>Plugin Usage Example:</h3>
  <hr \>
<p>
The plugin with its most basic use, checking for critical alerts.
</p>
<pre class=code>susie: ~ # cd /srv/app/nagios/libexec
susie: ~ # ./check_avaya_error.pl -H 192.168.65.11 -C SECro -S CML -E CRI
OK: No Communications Manager Alerts (CRITICAL)</pre>
</p>
<p>
The plugin checking for server log warnings.
</p>
<pre class=code>susie: ~ # cd /srv/app/nagios/libexec
susie: ~ # ./check_avaya_error.pl -H 192.168.65.11 -C SECro -S CML -E WRN
WARNING: WARNING Alarmport: 01A11, MaintName: UDS1-BD, Date: 28.11. Time: 22:17
WARNING Alarmport: 01B11, MaintName: UDS1-BD, Date: 28.11. Time: 22:17
WARNING Alarmport: 02A11, MaintName: UDS1-BD, Date: 29.11. Time: 15:32
WARNING Alarmport: 02A14, MaintName: UDS1-BD, Date: 29.11. Time: 15:32
WARNING Alarmport: 02B11, MaintName: UDS1-BD, Date: 03.12. Time: 12:08
WARNING Alarmport: 02B14, MaintName: UDS1-BD, Date: 28.11. Time: 22:17
WARNING Alarmport: S00159, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: S00246, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: S00250, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: S00386, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: S00410, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: S00483, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: S00500, MaintName: DIG-IP-S, Date: 09.12. Time: 10:50
WARNING Alarmport: S00503, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: S00637, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: S00653, MaintName: DIG-IP-S, Date: 13.12. Time: 12:52
WARNING Alarmport: S00667, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: S00806, MaintName: DIG-IP-S, Date: 03.12. Time: 12:57
WARNING Alarmport: S00852, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: S01074, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: S01148, MaintName: DIG-IP-S, Date: 07.12. Time: 13:21
WARNING Alarmport: S01172, MaintName: DIG-IP-S, Date: 28.11. Time: 22:21
WARNING Alarmport: 01A0718, MaintName: AN-LN-PT, Date: 29.11. Time: 22:15
WARNING Alarmport: 02A0706, MaintName: AN-LN-PT, Date: 29.11. Time: 22:16
WARNING Alarmport: 02A0707, MaintName: AN-LN-PT, Date: 29.11. Time: 22:16
WARNING Alarmport: 02A0714, MaintName: AN-LN-PT, Date: 30.11. Time: 22:15</pre>
<p></p>
</div>
</body></html>
